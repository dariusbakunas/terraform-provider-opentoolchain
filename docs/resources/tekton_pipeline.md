---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "opentoolchain_tekton_pipeline Resource - terraform-provider-opentoolchain"
subcategory: ""
description: |-
  Manage tekton pipeline, do not use this in conjunction with opentoolchain_tekton_pipeline_overrides or you may get inconsistent results (WARN: using undocumented APIs)
---

# opentoolchain_tekton_pipeline (Resource)

Manage tekton pipeline, do not use this in conjunction with `opentoolchain_tekton_pipeline_overrides` or you may get inconsistent results (WARN: using undocumented APIs)

## Example Usage

```terraform
resource "opentoolchain_tekton_pipeline" "tp" {
  toolchain_id = opentoolchain_toolchain.tc.guid
  env_id       = "ibm:yp:us-east"
  name         = "main-pipeline"

  definition {
    github_integration_id = opentoolchain_integration_ibm_github.gi.integration_id
    github_url            = opentoolchain_integration_ibm_github.gi.repo_url
    branch                = "master"
    path                  = ".tekton"
  }

  text_env = {
    TEST_VAR = "example_value"
  }

  secret_env = {
    TEST_VAULT_SECRET = "{vault::${opentoolchain_integration_keyprotect.kp.name}.TEST_VAULT_SECRET}"
  }

  trigger {
    enabled = true
    name = "CI Manual Trigger"
    event_listener = "ci-manual"
    type = "manual"
  }

  trigger {
    enabled = false
    name = "CI Git PR Trigger"
    branch = "master"
    github_integration_id = opentoolchain_integration_ibm_github.gi.integration_id
    github_url = opentoolchain_integration_github.gi.repo_url
    event_listener = "ci-git-pr"
    on_pull_request = true
    type = "scm"
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- **definition** (Block Set, Min: 1) (see [below for nested schema](#nestedblock--definition))
- **env_id** (String) Environment ID, example: `ibm:yp:us-south`
- **name** (String) Pipeline name
- **toolchain_id** (String) The toolchain `guid`
- **trigger** (Block Set, Min: 1) (see [below for nested schema](#nestedblock--trigger))

### Optional

- **id** (String) The ID of this resource.
- **secret_env** (Map of String, Sensitive) Pipeline environment secret properties, use `{vault::vault_integration_name.VAULT_KEY}` with vault integration.
- **text_env** (Map of String) Pipeline environment text properties

### Read-Only

- **dashboard_url** (String) Pipeline dashboard URL
- **encrypted_secrets** (Map of String, Sensitive) Opentoolchain API does not return actual secret values, this is used internally to track changes to encrypted strings
- **pipeline_id** (String) The tekton pipeline `guid`
- **status** (String) Pipeline status

<a id="nestedblock--definition"></a>
### Nested Schema for `definition`

Required:

- **branch** (String) Github branch that contains tekton definition
- **github_integration_id** (String) Github integration ID
- **github_url** (String) Github repository URL

Optional:

- **path** (String) Path to tekton definition inside Github repository


<a id="nestedblock--trigger"></a>
### Nested Schema for `trigger`

Required:

- **event_listener** (String) Event Listener name (from .tekton pipeline definition)
- **name** (String) Trigger name
- **type** (String) Trigger type

Optional:

- **branch** (String) GitHub branch
- **enabled** (Boolean) `true` if trigger should be active
- **github_integration_id** (String) Github integration ID
- **github_url** (String) Github repository URL
- **on_pull_request** (Boolean) Trigger when pull request is opened or updated
- **on_pull_request_closed** (Boolean) Trigger when pull request is closed
- **on_push** (Boolean) Trigger when commit is pushed
- **pattern** (String) GitHub branch pattern, if `branch` is not specified, otherwise setting is ignored

Read-Only:

- **id** (String) Trigger ID

## Import

Import is supported using the following syntax:

```shell
terraform import opentoolchain_tekton_pipeline.tp <pipeline_id>/<env_id>
```
